module heap_fun;

import neat.runtime : assert, print;

void main() {
    mut int delegate()[] dgs;
    int delegate() test(int i) heap {
        int nest() => i;
        return &nest;
    }
    for (i <- 0 .. 10) dgs ~= test(i);
    for (i <- 0 .. 10) assert(dgs[i]() == i);
}
